name: "Anomaly Model"
version: "26.02.12.1"
author: "Exergy âˆž LLC"

entities:
  - name: anomaly
    brief: "An anomaly or phenomenon that challenges a theory"
    description: |
      Represents an anomaly, phenomenon, or observation that appears to violate or challenge
      the assumptions or claims of a physics theory. Anomalies are observations that don't
      fit the expected behavior predicted by a theory and may indicate limitations,
      errors, or the need for theory extension or replacement. Each anomaly is linked to
      the specific assumptions and claims it appears to violate, helping identify which
      aspects of the theory are challenged by the observation.
    primary_key: [anomaly_id]
    fields:
      - name: anomaly_id
        type: string
        primaryKey: true
        required: true
        description: "Unique identifier for the anomaly (e.g., 'mercury-perihelion-precession', 'ultraviolet-catastrophe')"
      - name: name
        type: string
        required: true
        description: "Display name of the anomaly or phenomenon (e.g., 'Mercury's Perihelion Precession', 'Ultraviolet Catastrophe')"
      - name: description
        type: string
        required: false
        description: "Detailed description of the anomaly, what was observed, and why it challenges the theory"
      - name: theory_id
        type: string
        required: true
        foreignKey:
          entity: theory
          field: theory_id
        description: "Reference to the theory that this anomaly challenges or violates"
      - name: violated_assumptions
        type: array
        required: false
        item_type:
          entity: violated_assumption
        description: "List of assumptions that this anomaly appears to violate or challenge (nested children)"
      - name: violated_claims
        type: array
        required: false
        item_type:
          foreignKey:
            entity: claim
            field: claim_id
        description: "Array of claim IDs that this anomaly appears to violate or challenge"
      - name: discovery_year
        type: integer
        required: false
        description: "Year when this anomaly was first observed or discovered"
      - name: explanation_theory_id
        type: string
        required: false
        foreignKey:
          entity: theory
          field: theory_id
        description: "Reference to the theory that explains or resolves this anomaly (if applicable)"
      - name: explanation
        type: string
        required: false
        description: "Description of how the anomaly was explained or resolved, including the explanation year and mechanism. Format: 'Year: [year]. [description]' or just '[description]' if year is in explanation_theory_id's theory year."
      - name: papers
        type: array
        required: false
        item_type:
          foreignKey:
            entity: paper
            field: paper_id
        description: "Array of paper IDs related to this anomaly (discovery papers, explanation papers, etc.)"
      - name: people
        type: array
        required: false
        item_type:
          foreignKey:
            entity: person
            field: person_id
        description: "Array of person IDs associated with this anomaly (discoverers, explainers, etc.)"

  - name: violated_assumption
    brief: "An assumption that is violated by an anomaly"
    description: |
      Represents a specific assumption from a theory that is violated or challenged by an anomaly.
      This entity links anomalies to the specific assumptions they contradict, allowing detailed
      tracking of which theoretical premises are challenged by observed phenomena.
    primary_key: [violated_assumption_id]
    parents:
      - child_fk: anomaly_id
        parent_array: violated_assumptions
    fields:
      - name: violated_assumption_id
        type: string
        primaryKey: true
        required: true
        description: "Unique identifier for this violated assumption record"
      - name: anomaly_id
        type: string
        required: true
        foreignKey:
          entity: anomaly
          field: anomaly_id
        description: "Reference to the parent anomaly"
      - name: assumption_id
        type: string
        required: true
        foreignKey:
          entity: assumption
          field: assumption_id
        description: "Reference to the assumption from the theory that is being violated"
      - name: violation_description
        type: string
        required: false
        description: "Description of how this specific assumption is violated by the anomaly"
